import random
from sqlalchemy.orm import Session
from database import DBDiscussion
from datetime import datetime

# ---------------------------------------------------------
# 1. í˜ë¥´ì†Œë‚˜ë³„ ëŒ€ì‚¬ í…œí”Œë¦¿ (ì„±í–¥ ë° í˜„ì‹¤ì„± ë°˜ì˜ ëŒ€í­ í™•ì¥)
# ---------------------------------------------------------

# [ê°€ì¹˜ íˆ¬ìì & ê¸°ê´€] - ì ì–ê³  ë¶„ì„ì ì¸ ë§íˆ¬, í€ë”ë©˜í„¸ ì¤‘ì‹œ
VALUE_BULL = [
    "ê¸°ì—… ê°€ì¹˜ ëŒ€ë¹„ ì—¬ì „íˆ ì €í‰ê°€ êµ¬ê°„ì…ë‹ˆë‹¤. ê¾¸ì¤€íˆ ëª¨ì•„ê°‘ë‹ˆë‹¤.",
    "{name}ì˜ í€ë”ë©˜í„¸ì€ ê²¬ê³ í•©ë‹ˆë‹¤. ì´ë²ˆ ì¡°ì •ì€ ì¢‹ì€ ë§¤ìˆ˜ ê¸°íšŒë„¤ìš”.",
    "ì‹¤ì  ê°œì„  ê¸°ëŒ€ê°ì´ ìœ íš¨í•©ë‹ˆë‹¤. ì¥ê¸°ì  ê´€ì ì—ì„œ ë§¤ìˆ˜í–ˆìŠµë‹ˆë‹¤.",
    "ê³µí¬ì— ì‚¬ì„œ í™˜í¬ì— íŒ”ë¼ëŠ” ê²©ì–¸ì„ ê¸°ì–µí•©ì‹œë‹¤. ë¶„í•  ë§¤ìˆ˜ ë“¤ì–´ê°‘ë‹ˆë‹¤.",
    "ì¬ë¬´ê±´ì „ì„±ì´ ìš°ìˆ˜í•˜ì—¬ í¬íŠ¸í´ë¦¬ì˜¤ ë¹„ì¤‘ì„ í™•ëŒ€í–ˆìŠµë‹ˆë‹¤.",
    "í˜„ì¬ PER, PBR ë°´ë“œ í•˜ë‹¨ì´ë„¤ìš”. í•˜ë°© ê²½ì§ì„±ì´ í™•ë³´ëœ ìë¦¬ë¼ ë´…ë‹ˆë‹¤.",
    "ì™¸ì¸ê³¼ ê¸°ê´€ì˜ ìŒëŒì´ ë§¤ì§‘ì´ ë³´ì´ë„¤ìš”. ê¸°ì—… ì²´ì§ˆ ê°œì„ ì´ ì´ë¤„ì§€ê³  ìˆìŠµë‹ˆë‹¤.",
    "ì´ ê°€ê²©ëŒ€ë©´ ë°°ë‹¹ ìˆ˜ìµë¥ ë§Œ ë´ë„ ì€í–‰ ì´ìë³´ë‹¤ ë‚«ìŠµë‹ˆë‹¤.",
    "ë‹¨ê¸° ë…¸ì´ì¦ˆë¡œ ì¸í•œ í•˜ë½ì€ ëŠ˜ í›Œë¥­í•œ ë§¤ìˆ˜ íƒ€ì ì´ì—ˆì£ .",
    "í˜„ê¸ˆíë¦„ ì°½ì¶œ ëŠ¥ë ¥ì´ ë›°ì–´ë‚œ ê¸°ì—…ì…ë‹ˆë‹¤. ë¯¿ê³  ê°‘ë‹ˆë‹¤.",
    "ìµœê·¼ ê³¼ëŒ€ ë‚™í­ì´ë¼ê³  íŒë‹¨ë˜ì–´ ì •ì°°ë³‘ ë³´ëƒˆìŠµë‹ˆë‹¤.",
    "ì‚°ì—… ì‚¬ì´í´ì´ í„´ì–´ë¼ìš´ë“œ í•˜ëŠ” ì´ˆì…ì…ë‹ˆë‹¤. ê¸¸ê²Œ ë³´ê³  ë‹´ìŠµë‹ˆë‹¤.",
    "ì£¼ê°€ëŠ” ê²°êµ­ ì‹¤ì ì— ìˆ˜ë ´í•˜ê²Œ ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ì§€ê¸ˆì€ ì‹¼ êµ¬ê°„ì…ë‹ˆë‹¤.",
    "ë¯¸ë˜ ì„±ì¥ ë™ë ¥ì´ í™•ì‹¤í•œë° ì‹œì¥ì´ ì•„ì§ ëª°ë¼ì£¼ëŠ”êµ°ìš”.",
    "ê²½ìŸì‚¬ ëŒ€ë¹„ ë©€í‹°í”Œ ë§¤ë ¥ì´ ë†’ì•„ì„œ ì‹ ê·œ ì§„ì…í–ˆìŠµë‹ˆë‹¤."
]

VALUE_BEAR = [
    "í˜„ì¬ ì£¼ê°€ëŠ” ê¸°ì—… ë‚´ì¬ ê°€ì¹˜ë¥¼ ë„ˆë¬´ ë„˜ì–´ì„°ìŠµë‹ˆë‹¤. ë¹„ì¤‘ ì¶•ì†Œí•©ë‹ˆë‹¤.",
    "í€ë”ë©˜í„¸ í›¼ì† ìš°ë ¤ê°€ ìˆì–´ ë³´ìˆ˜ì ìœ¼ë¡œ ì ‘ê·¼í•  í•„ìš”ê°€ ìˆìŠµë‹ˆë‹¤.",
    "ë‹¨ê¸° ê³¼ì—´ê¶Œì…ë‹ˆë‹¤. ë¦¬ìŠ¤í¬ ê´€ë¦¬ë¥¼ ìœ„í•´ ì¼ë¶€ ì´ìµ ì‹¤í˜„í–ˆìŠµë‹ˆë‹¤.",
    "ì‹œì¥ ë¶ˆí™•ì‹¤ì„±ì´ í•´ì†Œë  ë•Œê¹Œì§€ í˜„ê¸ˆ ë¹„ì¤‘ì„ ëŠ˜ë¦¬ê² ìŠµë‹ˆë‹¤.",
    "ì‹¤ì  ëŒ€ë¹„ ê³ í‰ê°€ ë…¼ë€ì´ ìˆë„¤ìš”. ë§¤ë„ í›„ ì§€ì¼œë³´ê² ìŠµë‹ˆë‹¤.",
    "ëª©í‘œê°€ì— ë„ë‹¬í•˜ì—¬ ë¶„í•  ë§¤ë„ ì‹œì‘í•©ë‹ˆë‹¤. ìˆ˜ìµ ê°ì‚¬í•©ë‹ˆë‹¤.",
    "ë§¤ì¶œ ì„±ì¥ì´ ë‘”í™”ë˜ëŠ” ì‹œê·¸ë„ì´ ì¬ë¬´ì œí‘œì— ë³´ì…ë‹ˆë‹¤. ì •ë¦¬í•©ë‹ˆë‹¤.",
    "ì„±ì¥ì„±ì€ ì¸ì •í•˜ì§€ë§Œ í˜„ì¬ ë°¸ë¥˜ì—ì´ì…˜ì€ ë‹¤ì†Œ ë¶€ë‹´ìŠ¤ëŸ½ë„¤ìš”.",
    "ë§¤í¬ë¡œ í™˜ê²½ì´ ë¶ˆì•ˆì •í•˜ì—¬ í¬íŠ¸í´ë¦¬ì˜¤ ë¦¬ë°¸ëŸ°ì‹± ì°¨ì›ì—ì„œ ëœì–´ëƒ…ë‹ˆë‹¤.",
    "ë°°ë‹¹ ì»· ìš°ë ¤ê°€ ìˆì–´ ë³´ìˆ˜ì  ê´€ì ìœ¼ë¡œ ìŠ¤íƒ ìŠ¤ ë³€ê²½í•©ë‹ˆë‹¤.",
    "ê²½ìŸ ì‹¬í™”ë¡œ ì¸í•œ ì˜ì—…ì´ìµë¥  í›¼ì†ì´ ìš°ë ¤ë˜ì–´ ì „ëŸ‰ ë§¤ë„í–ˆìŠµë‹ˆë‹¤.",
    "ì•„ì§ ë°”ë‹¥ì„ ë‹¤ì§€ëŠ” ëª¨ìŠµì´ ì•ˆ ë³´ì…ë‹ˆë‹¤. ê´€ë§ì´ ë‹µì´ë„¤ìš”.",
    "ì‹ ì‚¬ì—… ê°€ì‹œí™” ì „ê¹Œì§€ëŠ” ë°•ìŠ¤ê¶Œ íš¡ë³´ê°€ ì˜ˆìƒë˜ì–´ ë¹„ì¤‘ì„ ì¤„ì…ë‹ˆë‹¤.",
    "ë‹¨ê¸° ê¸‰ë“±ì— ë”°ë¥¸ í”¼ë¡œê°ì´ ëˆ„ì ëœ ìë¦¬ì…ë‹ˆë‹¤.",
    "ê¸°ëŒ€ê°ì´ ì£¼ê°€ì— ì„ ë°˜ì˜ëœ ìƒíƒœì…ë‹ˆë‹¤. ë‰´ìŠ¤ì— íŒ”ê³  ë‚˜ê°‘ë‹ˆë‹¤."
]

# [ì—­ë°œìƒ íˆ¬ìì] - êµ°ì¤‘ ì‹¬ë¦¬ì™€ ë°˜ëŒ€ë¡œ ì›€ì§ì„, ì‹œë‹ˆì»¬í•¨
CONTRARIAN_BULL = [
    "ë‹¤ë“¤ ê³µí¬ì— ì§ˆë ¤ ë˜ì§ˆ ë•Œê°€ ì§„ì§œ ë°”ë‹¥ì…ë‹ˆë‹¤. ì˜ ë°›ì•„ë¨¹ê³  ê°‘ë‹ˆë‹¤.",
    "ë‰´ìŠ¤ì— ì†ì§€ ë§ˆì„¸ìš”. ëŒ€ì¤‘ì´ íŒ¨ë‹‰ì— ë¹ ì§„ ì§€ê¸ˆì´ ê¸°íšŒì…ë‹ˆë‹¤.",
    "ë‚¨ë“¤ê³¼ ë°˜ëŒ€ë¡œ ê°€ì•¼ ëˆì„ ë²•ë‹ˆë‹¤. íˆ¬ë§¤ ë‚˜ì˜¬ ë•Œ ì¤ì¤.",
    "í”¼ ëƒ„ìƒˆê°€ ì§„ë™í•˜ëŠ”êµ°ìš”. ì €ëŠ” ì´ì œ ì§„ì…í•©ë‹ˆë‹¤.",
    "ê°œë¯¸ í„¸ê¸° ëë‚œ ë“¯? ìŠ¬ìŠ¬ ë‹´ì•„ë³¼ê¹Œìš”.",
    "ì¢…í† ë°©ì´ ì´ë ‡ê²Œ ì¡°ìš©í•œ ê±¸ ë³´ë‹ˆ ì´ì œ ì˜¬ë¼ê°ˆ ì¼ë§Œ ë‚¨ì•˜ë„¤ìš”.",
    "ì•…ì¬ ë‰´ìŠ¤ ë„ë°°ë  ë•Œê°€ ê°€ì¥ ìŒ€ ë•Œì£ . ë§¤ìˆ˜ ë²„íŠ¼ ëˆ„ë¦…ë‹ˆë‹¤.",
    "ë‹¤ë“¤ ì†ì ˆ ì¹˜ê³  ë– ë‚˜ëŠ” ê±° ë³´ë‹ˆ ë°”ë‹¥ ì‹œê·¸ë„ í™•ì‹¤í•˜ë„¤ìš”.",
    "ì´ëŸ° íˆ¬ë§¤ì¥ì—ì„œ ì£¼ì›Œì•¼ ë‚˜ì¤‘ì— í¬ê²Œ ë¨¹ìŠµë‹ˆë‹¤.",
    "ì¸ê°„ì§€í‘œë“¤ ê³¡ì†Œë¦¬ ë‚˜ëŠ” ê±° ë³´ë‹ˆ í’€ë§¤ìˆ˜ íƒ€ì´ë°ì…ë‹ˆë‹¤.",
    "ê¸°ê´€ë“¤ ê³µë§¤ë„ ìƒí™˜ ì‹œì‘í•˜ë©´ ìˆìŠ¤í€´ì¦ˆ ë‚˜ì˜µë‹ˆë‹¤. ì„ ì·¨ë§¤ ê°‘ë‹ˆë‹¤.",
    "ì–´ì°¨í”¼ ì‹œì¥ì€ ì‚¬ì´í´ì…ë‹ˆë‹¤. ìµœì•…ì˜ êµ­ë©´ì—ì„œ ì‚¬ì•¼ì£ .",
    "ëª¨ë‘ê°€ ëë‚¬ë‹¤ê³  í•  ë•Œê°€ ìƒˆë¡œìš´ ì‹œì‘ì ì…ë‹ˆë‹¤.",
    "êµ°ì¤‘ ì‹¬ë¦¬ì— íœ©ì“¸ë¦¬ë©´ ê³„ì¢Œ ë…¹ìŠµë‹ˆë‹¤. ì „ ë¬µë¬µíˆ ë§¤ìˆ˜í•©ë‹ˆë‹¤.",
    "ë°”ë‹¥ ë°‘ì— ì§€í•˜ì‹¤ ìˆë‹¤ê³ ìš”? ê·¸ ì§€í•˜ì‹¤ì—ì„œ ì‹¹ ë‹¤ ë§¤ì§‘í•©ë‹ˆë‹¤."
]

CONTRARIAN_BEAR = [
    "ëª¨ë‘ê°€ í™˜í˜¸í•  ë•Œê°€ ê³ ì ì…ë‹ˆë‹¤. ì €ëŠ” ì´ë§Œ ë‚´ë¦½ë‹ˆë‹¤.",
    "ë‰´ìŠ¤ 1ë©´ ì¥ì‹í•˜ëŠ” ê±° ë³´ë‹ˆ ê³ ì ì´ë„¤ìš”. ì „ëŸ‰ ìµì ˆí•©ë‹ˆë‹¤.",
    "ì¸ê°„ì§€í‘œ í­ë°œí•˜ë„¤. ì´ì œ ê³§ í­ë½í•  íƒ€ì´ë°ì´ë‹¤.",
    "ê±°í’ˆì´ ë„ˆë¬´ ê¼ˆë„¤ìš”. íŒŒí‹°ì¥ ë¶ˆ êº¼ì§€ê¸° ì „ì— íƒˆì¶œí•©ë‹ˆë‹¤.",
    "ì°¬í‹°ë“¤ì´ ëª°ë¦¬ëŠ” ê±¸ ë³´ë‹ˆ ëë¬¼ì´ë„¤ìš”. ì¡°ì‹¬ë“¤ í•˜ì„¸ìš”.",
    "ê°œë¯¸ë“¤ í’€ë§¤ìˆ˜ ê°€ì¦ˆì•„ ì™¸ì¹  ë•Œê°€ ì„¸ë ¥ë“¤ ë¬¼ëŸ‰ ë„˜ê¸°ëŠ” ìë¦¬ì£ .",
    "ê±°ë˜ëŸ‰ í„°ì§€ë©´ì„œ ìœ—ê¼¬ë¦¬? ì „í˜•ì ì¸ ì„¤ê±°ì§€ íŒ¨í„´ì…ë‹ˆë‹¤.",
    "ëˆ„êµ¬ë‚˜ ìˆ˜ìµ ë‚¼ ìˆ˜ ìˆë‹¤ê³  ë– ë“¤ ë•Œê°€ ì œì¼ ìœ„í—˜í•œ ì¥ì…ë‹ˆë‹¤.",
    "ì¥ë°‹ë¹› ì „ë§ë§Œ ê°€ë“í•œ ê±¸ ë³´ë‹ˆ ìˆ ì¹˜ê¸° ë”± ì¢‹ì€ ë‚ ì´êµ°ìš”.",
    "ë‹¤ë“¤ ì˜ì°¨ì˜ì°¨ í•  ë•Œ ì¡°ìš©íˆ í„¸ê³  ë‚˜ê°€ëŠ” ê²Œ ìŠ¹ìì…ë‹ˆë‹¤.",
    "ì´ê±° ê³§ ìœ ìƒì¦ìë‚˜ ì•…ì¬ í•˜ë‚˜ í„°ì§ˆ ìë¦¬ì¸ë°... ì „ ë„ë§ê°‘ë‹ˆë‹¤.",
    "ê´‘ê¸°ê°€ ì§€ë°°í•˜ëŠ” êµ¬ê°„ì…ë‹ˆë‹¤. ì´ì„±ì ìœ¼ë¡œ ë§¤ë„ ë²„íŠ¼ ëˆ„ë¦…ë‹ˆë‹¤.",
    "ì¶”ê²© ë§¤ìˆ˜í•˜ëŠ” ë¶„ë“¤, ì„¸ë ¥ë“¤ ì—‘ì‹œíŠ¸ ë¬¼ëŸ‰ ì˜ ë°›ì•„ì£¼ì‹­ì‡¼.",
    "ì—¬ê¸°ì„œ ë” ê°„ë‹¤ê³ ìš”? íƒìš•ì˜ ëì€ í•­ìƒ ì“°ë¼ë ¸ìŠµë‹ˆë‹¤.",
    "ë„ˆë¬´ í™•ì‹¤í•œ í˜¸ì¬ëŠ” ì˜¤íˆë ¤ ë…ì…ë‹ˆë‹¤. ìˆ˜ìµ ì‹¤í˜„ ì±™ê¸°ì„¸ìš”."
]

# [ê³µê²©ì  íˆ¬ê¸°ê¾¼/ëª¨ë©˜í…€] - ì°¨íŠ¸/ì¶”ì„¸ ì¶”ì¢…, ë‹¨íƒ€, ê°ì •ì  í‘œí˜„
SPECULATOR_BULL = [
    "ğŸš€ {name} í™”ì„± ê°ˆë„ë‹ˆê¹Œ~ ê½‰ ì¡ì•„!",
    "ì°¨íŠ¸ ëš«ì—ˆë‹¤! ëŒíŒŒë§¤ë§¤ ë“¤ì–´ê°‘ë‹ˆë‹¤!",
    "ìˆ˜ê¸‰ í„°ì¡Œë„¤ìš”, ì˜¤ëŠ˜ ìƒí•œê°€ ë¬¸ ë‹«ìŠµë‹ˆê¹Œ?",
    "í˜•ë“¤ ë‚˜ ë°©ê¸ˆ í’€ë§¤ìˆ˜ ë•Œë ¸ì–´, ì œë°œ ì‚´ë ¤ì¤˜!",
    "ì´ê±° 5ì¼ì„  íƒ€ê³  ì­‰ ê°€ë„¤ìš”. ë¶ˆíƒ€ê¸° ê°‘ë‹ˆë‹¤.",
    "ì§€ê¸ˆ ì•ˆ ì‚¬ë©´ ë²¼ë½ê±°ì§€ ë©ë‹ˆë‹¤ ã…‹ã…‹ã…‹ íƒ‘ìŠ¹ ì™„ë£Œ!",
    "ì™¸êµ­ì¸ í”„ë¡œê·¸ë¨ ë§¤ìˆ˜ ë“¤ì–´ì˜¤ëŠ” ê±° ë³´ì†Œ. ë¬´ì¡°ê±´ ë”°ë¼ë¶™ëŠ”ë‹¤.",
    "ì˜¤ëŠ˜ ì €ë…ì€ ì†Œê³ ê¸°ë‹¤!! ì˜ì°¨ ì˜ì°¨!!",
    "ê±°ë˜ëŒ€ê¸ˆ ì‹¤ë¦° ì–‘ë´‰! ì´ê±´ ì°ë°˜ë“±ì…ë‹ˆë‹¤.",
    "ì „ê³ ì  ëŒíŒŒ ì„ë°•! ì—¬ê¸°ì„œ ì•ˆ ì‚¬ë©´ ì–¸ì œ ì‚¼?",
    "í˜¸ê°€ì°½ ì–‡ì•„ì§€ëŠ” ê±° ë³´ë‹ˆ ê³§ ìŠˆíŒ… ë‚˜ì˜µë‹ˆë‹¤ ê½‰ ì¡ìœ¼ì„¸ìš”.",
    "ë‚˜ë§Œ ì•„ë‹ˆë©´ ë¼~~ ë–¡ìƒ ê°€ë³´ìê³ !",
    "ë‹¨íƒ€ ì¹˜ëŸ¬ ì™”ë‹¤ê°€ ì°¨íŠ¸ ë„ˆë¬´ ì˜ˆë»ì„œ ìŠ¤ìœ™ìœ¼ë¡œ ë“¤ê³  ê°‘ë‹ˆë‹¤.",
    "ì´ê±° ì¬ë£Œ ì‚´ì•„ìˆë„¤. ë‚´ì¼ ê°­ìƒìŠ¹ ë…¸ë¦¬ê³  ì¢…ê°€ë² íŒ… ê°‘ë‹ˆë‹¤.",
    "ì„¸ë ¥ í˜•ë‹˜ë“¤ ìš´ì „ ì†œì”¨ êµ¿~ ëª©í‘œê°€ê¹Œì§€ ì¡´ë²„!!"
]

SPECULATOR_BEAR = [
    "ğŸ’§ {name} ë”í™©ì± !!! ë‚˜ë½ ê°„ë‹¤ ã… ã… ",
    "ì•„ì”¨ ì§€ì§€ì„  ê¹¨ì¡Œë„¤ ã… ã…  ì¹¼ì†ì ˆ ì¹©ë‹ˆë‹¤.",
    "ì£¼í¬ í˜•ë‹˜ë“¤ ë„ˆë¬´ ì•…ë„í•˜ë„¤... í„¸ê³  ë‚˜ê°‘ë‹ˆë‹¤.",
    "ì´ê±° ì˜¤ëŠ˜ ì¥ëŒ€ìŒë´‰ ê½‚íˆê² ëŠ”ë°? ë¹¨ë¦¬ ë„ë§ì³!!",
    "ë¬¼ë ¸ë„¤ìš”... ê°•ì œ ê°€ì¹˜íˆ¬ì ì‹œì‘í•©ë‹ˆë‹¤ í•˜...",
    "ì–´ì œ ìƒ€ëŠ”ë° í•˜ë£¨ë§Œì— -10% ì‹¤í™”ëƒ? ì£¼ì‹ ì ‘ëŠ”ë‹¤ í‰¤.",
    "ë§¤ë„ ë²½ ë‘êº¼ì›Œì§€ëŠ” ê±° ë³´ë‹ˆ ë‹µ ì—†ë„¤ìš”. ë˜ì§‘ë‹ˆë‹¤.",
    "íˆ¬ë§¤ê°€ íˆ¬ë§¤ë¥¼ ë¶€ë¥´ë„¤... ë¹¤ìŠ¤ëŸ° ì³¤ìŠµë‹ˆë‹¤.",
    "ì„¤ê±°ì§€ ë‹¹í–ˆë„¤ ì•„ì˜¤... ë‚´ ëˆ ëŒë ¤ì¤˜ ã… ã… ",
    "ë°˜ë“± ì¤„ ë•Œ íŠ€ì–´ë¼. ì§€ì˜¥ë¬¸ ì—´ë ¸ë‹¤.",
    "ì°¨íŠ¸ ì™„ì „ ë¬´ë„ˆì¡Œë„¤ìš”. ë°ë“œí¬ë¡œìŠ¤ ë°œìƒ, ì „ëŸ‰ ë§¤ë„.",
    "ì•„ì¹¨ì— ì‹œê°€ë² íŒ… ë“¤ì–´ê°”ë‹¤ê°€ ê°œê°™ì´ ë©¸ë§... ì†ì ˆ ì™„ë£Œ.",
    "ì´ê±° ë¸”ë¡ë”œì´ë‚˜ ì°Œë¼ì‹œ ë„ëŠ” ê±° ì•„ë‹˜? ì™œ ì´ë¦¬ ë¹ ì ¸?",
    "í•˜ë”°(í•˜í•œê°€ ë”°ë¼ì¡ê¸°) í•˜ë ¤ë‹¤ ì†ëª¨ê°€ì§€ ë‚ ì•„ê°”ìŠµë‹ˆë‹¤.",
    "ì†ì‹¤ ìµœì†Œí™”ê°€ ìƒëª…ì…ë‹ˆë‹¤. ë” ë¹ ì§€ê¸° ì „ì— ìë¦…ë‹ˆë‹¤."
]

# ---------------------------------------------------------
# 2. í—¬í¼ í•¨ìˆ˜
# ---------------------------------------------------------
def get_agent_type(agent_id):
    """agent_society_brain.pyì™€ ë™ì¼í•œ ë¡œì§ìœ¼ë¡œ ì„±í–¥ íŒë‹¨"""
    try:
        parts = agent_id.split('_')
        idx = int(parts[-1]) if len(parts) > 1 and parts[-1].isdigit() else 0
    except: idx = 0

    mod = idx % 10
    if mod < 4: return "VALUE"       # 40% ê°€ì¹˜íˆ¬ì
    elif mod < 6: return "VALUE"     # 20% ê¸°ê´€ (ê°€ì¹˜ì™€ í†µí•©)
    elif mod < 8: return "CONTRARIAN" # 20% ì—­ë°œìƒ
    else: return "SPECULATOR"        # 20% íˆ¬ê¸°/ë‹¨íƒ€ê¾¼

def post_comment(db: Session, agent_id: str, ticker: str, action: str, company_name: str, sim_time: datetime = None):
    # ğŸ² ê¸€ ì“°ëŠ” í™•ë¥  (íˆ¬ê¸°ê¾¼ì¼ìˆ˜ë¡ ë§ì´ ë§ìŒ)
    agent_type = get_agent_type(agent_id)
    
    # í™•ë¥  ì„¸íŒ…: ì‹¤ì œ ì¢…í† ë°©ì²˜ëŸ¼ ë‹¨íƒ€ê¾¼ë“¤ì´ ê°€ì¥ ê¸€ì„ ë§ì´ ì“°ë„ë¡ ì„¤ì •
    threshold = 0.2
    if agent_type == "SPECULATOR": threshold = 0.5  # ë‹¨íƒ€ê¾¼ì€ 50% í™•ë¥ ë¡œ ê¸€ ì”€
    elif agent_type == "CONTRARIAN": threshold = 0.3 # ì—­ë°œìƒì€ 30%
    elif agent_type == "VALUE": threshold = 0.1     # ê°€ì¹˜íˆ¬ìëŠ” 10% (ë¬µë¬µíˆ ë§¤ë§¤í•¨)

    if random.random() > threshold:
        return

    # ëŒ€ì‚¬ ì„ íƒ
    content = ""
    sentiment = ""

    if action == "BUY":
        sentiment = "BULL"
        if agent_type == "VALUE": template = random.choice(VALUE_BULL)
        elif agent_type == "CONTRARIAN": template = random.choice(CONTRARIAN_BULL)
        else: template = random.choice(SPECULATOR_BULL)
    
    elif action == "SELL":
        sentiment = "BEAR"
        if agent_type == "VALUE": template = random.choice(VALUE_BEAR)
        elif agent_type == "CONTRARIAN": template = random.choice(CONTRARIAN_BEAR)
        else: template = random.choice(SPECULATOR_BEAR)
    
    else:
        return

    # ë‚´ìš© ì™„ì„± (ê°€ë” í…œí”Œë¦¿ì— {name} í¬ë§·íŒ…ì´ ìˆì„ ê²½ìš°ë¥¼ ìœ„í•´)
    content = template.replace("{name}", company_name)

    # DBì— ì €ì¥
    new_post = DBDiscussion(
        ticker=ticker,
        agent_id=agent_id,
        content=content,
        sentiment=sentiment,
        created_at=sim_time or datetime.now()
    )
    db.add(new_post)
    db.commit()
    
    # ì„œë²„ ë¡œê·¸ í™•ì¸ìš© (ì„ íƒ)
    # print(f"ğŸ’¬ [{agent_type}] {agent_id}: {content}")